[01부] 침입 탐지를 위한 네트워크와 서버 디자인

▣ 01장: OSI 7 계층과 보안 솔루션
01 보안 관점에서만 바라본 OSI 7 계층 이야기
___L2 계층
___L3 계층
___L4 계층
___L7 계층
02 각 계층별 보안 솔루션
___Anti-DDoS
___방화벽(Firewall)
___IPS/IDS
___웹 방화벽, 웹 프락시
03 방화벽 디자인
___방화벽은 보안팀의 작업인가, 네트워크 팀의 작업인가?
___패킷 필터링과 1세대 방화벽의 한계
___2세대 방화벽의 스테이트풀 인스펙션
___L7까지 커버하는 3세대 방화벽
___방화벽 앞뒤 구간의 위치별 역할
04 NAT에서 발생하는 보안 취약점
___DNAT
___SNAT
___보안 취약점 예시
05 네트워크 환경에 따라 달라지는 방화벽 디자인
06 방화벽이 죽을 때를 위한 대비 - HA
___액티브 스탠바이. 한대는 온라인, 한대는 대기
___L4 스위치를 이용한 액티브 액티브
07 바이패스 스위치, L2 Fallback
08 가용성의 끝판왕, 풀 메시
09 방화벽 룰 관리
10 정리

▣ 02장: IPS와 웹 방화벽
01 IPS가 제공하는 기능
02 L7 계층의 공격을 방어하자
03 디도스 방어
04 트래픽 학습
05 IPS 역할과 위치 선정
06 IPS 위치 디자인
___서버를 통해 발생하는 위협
___직원들의 사내망을 통해 발생하는 위협
___디도스 공격으로부터 발생하는 위협
07 웹으로 한정한 보호 구간과 웹 방화벽의 위치
08 IPS로 직원을 보호하는 디자인
09 IPS의 가상 센서
10 보안 시스템으로 발생할 수 있는 성능 저하에 대한 고민
11 보안 위협을 먼저 정의하자

▣ 03장: IDS 위치 선정과 센서 디자인
01 패턴 매칭 기반의 IDS
02 트래픽을 복사하자, 스팬(SPAN)/포트 미러링
03 패킷 유실을 막기 위한 네트워크 탭(TAP)
04 탐지된 IP 주소가 보이지 않는다. NAT에서 발생하는 문제
05 IDS의 기본적인 네트워크 위치
06 센서의 설치로 네트워크 시야를 넓히자
07 모니터링이 필요한 자산이 무엇인지 정확히 파악하자
08 정리

▣ 04장: VPN의 실무적인 접근과 이해
01 공유기를 통한 가상 사설망의 이해
02 VPN을 통한 차단 사이트 우회
03 VPN을 통한 보안 강화와 암호화
04 VPN의 보안 취약점
05 VPN의 종류
___PPTP
___L2TP
___IPSec
___OpenVPN
___SSL-VPN
___SSTP

[02부] UTM 활용: 오픈소스 통합 보안 시스템 구축

▣ 05장: 오픈소스 방화벽 pfSense 설치와 랩 네트워크 구성
01 UTM 설치 경험에서 얻는 의의
02 UTM 랩 환경을 위한 준비물
___하드웨어
___소프트웨어
03 VMware Player에서 가동되는 ESXi
04 오픈소스 UTM - pfSense
05 랩 환경의 뿌리, ESXi 설치
06 랩 전용 네트워크에서 NIC을 3개 설치하는 이유
07 가상 스위치 구성
08 pfSense 설치
09 방화벽의 외부 네트워크와 내부 네트워크 구성
10 pfSense의 초기 세팅 구성

▣ 06장: VLAN 구성을 통한 망분리
01 VLAN
02 웹 서버 대역의 VLAN 생성
03 오피스 대역의 VLAN 생성
04 내부 서버 대역의 VLAN 생성
05 DB 서버 대역의 VLAN 생성
06 ACL 반영 - 접근 제어
07 기본 ACL 반영
08 Aliases 등록을 활용한 효율적인 룰 작성
09 VLAN20에서 다른 VLAN으로의 접속 차단
10 VLAN30에서 다른 VLAN으로의 접속 차단
11 VLAN40에서 다른 VLAN으로의 접속 차단
12 서비스나 관리에 필요한 포트/IP 허용
13 사무실에서 접근해야 하는 영역
14 방화벽 룰 관리
15 NAT 설정
16 랩 환경에서 외부에 전체 포트를 노출시켜 방화벽 기능을 제대로 사용하는 방법

▣ 07장: 웹 필터, 유해차단 시스템 스퀴드 구축
01 보안적인 관점에서 프락시 서버를 쓰는 목적
02 pfSense에 포함된 스퀴드 프락시 설치
03 스퀴드 프락시에서의 Transparent Mode
04 유해차단시스템인 스퀴드 가드의 적용
05 필요하지 않은 URL 접속 차단
06 정리

▣ 08장: 인라인 IPS 구축
01 스노트 IPS 설치
02 보호할 IPS 인터페이스 선택
03 IPS 룰 다운로드
04 개별 인터페이스 설정
05 IPS 탐지 테스트
06 유연한 룰 정책과 차단/탐지에서의 예외 처리
07 모니터링 후 차단으로 정책 변환
08 커스텀 패턴 추가

▣ 09장: VPN을 통한 외부에서의 접근 제어
01 OpenVPN의 기본 설정
02 VPN 에이전트 배포와 설정
03 ACL 반영 - VPN의 문제점
04 정리

[03부] IDS 구축과 운영: 오픈소스 IDS 보안양파

▣ 10장: 시큐리티 어니언 설치
01 패킷 모니터링을 위한 네트워크 설정
02 보안양파 설치
03 보안양파의 주요 포트 개방

▣ 11장: IDS의 튜닝과 주요 명령어
01 보안양파의 최초 튜닝
02 로그 보관 주기와 용량 튜닝
03 전체 패킷 수집
04 불필요한 트래픽 걸러내기
05 IDS 상태 체크
06 이메일 알럿 받기

▣ 12장: 룰 관리와 제로데이 익스플로잇 대응
01 스노트 룰과 수리카타 룰의 기본 문법
02 case1) “ET POLICY DynDNS CheckIp External IP Address Server Response”
02 case2) “ET POLICY Dropbox DNS Lookup - Possible Offsite il eF Backup in Use”
03 커스텀 패턴 추가하기
___스레시홀드 작업을 통한 알럿 최소화
04 불필요한 룰 제거 2
05 제로데이 익스플로잇 대응
06 룰 테스트를 위한 패킷 임의 생성
___TCPReplay
___scapy
07 룰 튜닝과 성능 향상의 전제조건

▣ 13장: 브로와 Xplico를 이용한 네트워크 포렌식
01 엘사를 이용한 브로 데이터 검색
02 브로를 이용한 DNS 쿼리 추적
03 네트워크 상에 떠다니는 파일 추출
04 브로를 이용한 FTP 사용 추적
05 Bro를 이용한 MySQL 사용 추적
06 브로 로그의 위치
07 브로를 이용해 다양한 파일 추출하기
08 브로에서 SMB 트래픽 추적 연동하기
09 악성코드처럼 보이는 HTTP 트래픽 추적
10 의심스러운 PE 포맷 파일 다운로드 알람 추적
11 Xplico를 활용한 네트워크 포렌식

[04부] ESM과 보안 로그의 중앙 집중화

▣ 14장: ESM을 이용한 보안 로그의 중앙 집중화
01 ESM의 의의와 수집하려는 시스템의 로그
02 스플렁크 설치
03 방화벽 로그와 VPN 로그를 스플렁크로 포워딩하기
04 방화벽 로그를 해석하는 법
05 VPN 로그
06 IPS 로그
07 반야드2
08 스퀴드가드 로그
09 IDS 로그 전송
10 유니버설 포워더를 이용한 로그 전송
11 리눅스 로그 수집을 위한 포워더 설치
12 윈도우 이벤트 로그 수집을 위한 포워더 설치
13 스플렁크의 기본 검색 사용법

▣ 15장: 윈도우 이벤트 로그와 리눅스 로그의 분석
01 이벤트 로그 포맷의 기초
___응용 프로그램 로그
___보안 로그
___시스템 로그
02 이벤트 로그의 포맷
03 이벤트 로그 활성화 튜닝
04 계정 관리 감사와 관련된 로그 분석
05 로그인 관련 감사 로그 분석
06 로그오프/로그인 실패 로그 분석
07 프로세스 추적 로그 분석
08 정책 변경 로그 분석
09 불필요한 로그 필터링
10 리눅스 로그 분석
11 커맨드 로깅 툴 스누피 설치

▣ 16장: 윈도우 로그 분석의 최강자 시스몬
01 시스몬 설치
02 시스몬의 로그 포맷
03 스플렁크와 시스몬의 연동
04 시스몬 필터를 이용한 로그 다이어트

▣ 17장: 시각화와 교차분석을 통한 탐지 능력 고도화
01 스플렁크 대시보드 작성
02 스플렁크를 이용한 데이터 추출과 파싱
03 스플렁크로 그래프 한방에 그리기
04 스플렁크 고급 검색을 활용한 악성코드 svchost.exe 탐지
05 의심스러운 곳으로 접속하는 프로세스 탐지
06 연관분석 시나리오 만들기
07 1차원적 로그도 제대로 분석하지 않는 상황
08 연관분석의 개념과 원리